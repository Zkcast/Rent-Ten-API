<div>
    <div *ngIf="(userProfile$ | async); let user;" class="container">

        <!-- ---- PROFILE ---- -->

        <img src="{{profileImg ? profileImg : user.picture }}" class="profileImg" />

        <span class="edit" >
          <svg (click)="fileInput.click()" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M421.7 220.3l-11.3 11.3-22.6 22.6-205 205c-6.6 6.6-14.8 11.5-23.8 14.1L30.8 511c-8.4 2.5-17.5 .2-23.7-6.1S-1.5 489.7 1 481.2L38.7 353.1c2.6-9 7.5-17.2 14.1-23.8l205-205 22.6-22.6 11.3-11.3 33.9 33.9 62.1 62.1 33.9 33.9zM96 353.9l-9.3 9.3c-.9 .9-1.6 2.1-2 3.4l-25.3 86 86-25.3c1.3-.4 2.5-1.1 3.4-2l9.3-9.3H112c-8.8 0-16-7.2-16-16V353.9zM453.3 19.3l39.4 39.4c25 25 25 65.5 0 90.5l-14.5 14.5-22.6 22.6-11.3 11.3-33.9-33.9-62.1-62.1L314.3 67.7l11.3-11.3 22.6-22.6 14.5-14.5c25-25 65.5-25 90.5 0z" /></svg>
          <input (change)="onFileSelected($event)" #fileInput type="file" name="" id="" id="fileUpload" style="display: none;">
        </span>
        <!-- <button style="float:right" (click)="showProfileJson()">Console log Profile json & profile DB</button> -->
        <p>{{user.name}}</p>
        <p>{{user.lastname}}</p>


        <!-- ---- EMAIL ---- -->

        <div>

            <h3>{{user.mail}}
                <h4 *ngIf="user.verified === 'verified'" style="color: green">&#x2714;Your email is verified</h4>
            </h3>

            <h5 *ngIf="user.verified === 'not_verified'" style="color: red; font-weight: 400;">
                <button style="size: 50%" (click)="verifyAccount()" type="button"
                    class="btn btn-outline-danger btn-sm">Verify</button>
                &#x2716; Your account is not verified
            </h5>

            <div *ngIf="user.verified === 'pending'">

                <form>
                    <p>Please enter the security code which you received in your email</p>
                    <input #code name="code" value="" type="string" placeholder="Insert the code">
                    <button style="size: 50%" (click)="sendVerificationCode(code.value)" type="button"
                        class="btn btn-outline-warning btn-sm">Verify</button>
                </form>
            </div>

            <p style="color:red" *ngIf="error">{{error.error.msg}}</p>
        </div>

        <!-- ---- FAVORITES HOUSES ---- -->

        <div class="row align-items-start">
            <h3 *ngIf="favoritesHouses.length > 0">Favorites houses: </h3>
            <div *ngFor="let house of favoritesHouses">
                <img style="max-width: 250px;" class="img-thumbnail" src={{house.picture[0]}} />
                <ul>
                    <li>{{house.id}}</li>
                    <li>Country: {{house.country}}</li>
                    <li>City: {{house.city}}</li>
                    <li>Rooms: {{house.rooms}}</li>
                    <li>Bathrooms: {{house.bathrooms}}</li>
                    <li>Maxpeople: {{house.maxpeople}}</li>
                    <li>Allowpets: {{house.allowpets}}</li>
                    <button class="btn btn-outline-danger" (click)="deleteFavorite(house.id, user.id)">Delete from
                        favorites</button>
                </ul>
                <hr />
            </div>

        </div>

    </div>
    <p *ngIf="!(userProfile$ | async)">loading...</p>
